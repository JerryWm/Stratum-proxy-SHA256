
<head>

	<script src="lib/jquery/jquery-3.2.1.min.js"></script>
	
	
	<title>Stratum proxy</title>
	

	<script src="lib/popper/1.12.3/umd/popper.min.js"></script>

	<link  href="lib/bootstrap-4.0.0-beta.2/css/bootstrap.min.css" rel="stylesheet" >
	<script src="lib/bootstrap-4.0.0-beta.2/js/bootstrap.min.js"></script>

	<link rel="stylesheet" type="text/css" href="lib/datatable/css/style.css"/>
	<script type="text/javascript" src="lib/datatable/js/datatables.min.js"></script>

	<script type="text/javascript" src="lib/noty/noty.min.js" ></script>
	<link rel="stylesheet" type="text/css" href="lib/noty/noty.css">

	
	<!--
	<link rel="stylesheet" type="text/css" href="lib/mdl/material.min.css">
	<script type="text/javascript" src="lib/mdl/material.min.js" ></script>
	-->
	
	<script type="text/javascript" src="lib/socket.io/socket.io.js" ></script>
	
	<script type="text/javascript" src="lib/vue/vue.js" ></script>
	
	<script type="text/javascript" src="lib/require/require.js" ></script>
	
</head>


<body>

<svg aria-hidden="true" style="position: absolute; width: 0; height: 0; overflow: hidden;" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<defs>
<symbol id="icon-floppy" viewBox="0 0 32 32">
<title>floppy</title>
<path d="M30 32h-28c-1.104 0-2-0.896-2-2v-28c0-1.104 0.896-2 2-2h24l6 6v24c0 1.104-0.896 2-2 2zM8 27c0 0.553 0.448 1 1 1h14c0.553 0 1-0.447 1-1v-8c0-0.553-0.447-1-1-1h-14c-0.552 0-1 0.447-1 1v8zM22 5c0-0.553-0.447-1-1-1s-1 0.447-1 1v3c0 0.553 0.447 1 1 1s1-0.447 1-1v-3zM28 7l-3-3h-1v7c0 0.553-0.447 1-1 1h-14c-0.552 0-1-0.447-1-1v-7h-3c-0.552 0-1 0.447-1 1v22c0 0.553 0.448 1 1 1h1v-11c0-0.553 0.448-1 1-1h18c0.553 0 1 0.447 1 1v11h1c0.553 0 1-0.447 1-1v-20z"></path>
</symbol>
<symbol id="icon-cross" viewBox="0 0 32 32">
<title>cross</title>
<path d="M31.708 25.708c-0-0-0-0-0-0l-9.708-9.708 9.708-9.708c0-0 0-0 0-0 0.105-0.105 0.18-0.227 0.229-0.357 0.133-0.356 0.057-0.771-0.229-1.057l-4.586-4.586c-0.286-0.286-0.702-0.361-1.057-0.229-0.13 0.048-0.252 0.124-0.357 0.228 0 0-0 0-0 0l-9.708 9.708-9.708-9.708c-0-0-0-0-0-0-0.105-0.104-0.227-0.18-0.357-0.228-0.356-0.133-0.771-0.057-1.057 0.229l-4.586 4.586c-0.286 0.286-0.361 0.702-0.229 1.057 0.049 0.13 0.124 0.252 0.229 0.357 0 0 0 0 0 0l9.708 9.708-9.708 9.708c-0 0-0 0-0 0-0.104 0.105-0.18 0.227-0.229 0.357-0.133 0.355-0.057 0.771 0.229 1.057l4.586 4.586c0.286 0.286 0.702 0.361 1.057 0.229 0.13-0.049 0.252-0.124 0.357-0.229 0-0 0-0 0-0l9.708-9.708 9.708 9.708c0 0 0 0 0 0 0.105 0.105 0.227 0.18 0.357 0.229 0.356 0.133 0.771 0.057 1.057-0.229l4.586-4.586c0.286-0.286 0.362-0.702 0.229-1.057-0.049-0.13-0.124-0.252-0.229-0.357z"></path>
</symbol>
<symbol id="icon-arrow-up" viewBox="0 0 32 32">
<title>arrow-up</title>
<path d="M16 1l-15 15h9v16h12v-16h9z"></path>
</symbol>
<symbol id="icon-arrow-down" viewBox="0 0 32 32">
<title>arrow-down</title>
<path d="M16 31l15-15h-9v-16h-12v16h-9z"></path>
</symbol>
</defs>
<symbol id="icon-plus" viewBox="0 0 32 32">
<title>plus</title>
<path d="M31 12h-11v-11c0-0.552-0.448-1-1-1h-6c-0.552 0-1 0.448-1 1v11h-11c-0.552 0-1 0.448-1 1v6c0 0.552 0.448 1 1 1h11v11c0 0.552 0.448 1 1 1h6c0.552 0 1-0.448 1-1v-11h11c0.552 0 1-0.448 1-1v-6c0-0.552-0.448-1-1-1z"></path>
</symbol>
</svg>


<style>
.icon {
  display: inline-block;
  width: 1em;
  height: 1em;
  stroke-width: 0;
  stroke: currentColor;
  fill: currentColor;
}
</style>


	<header class="navbar">
		<nav class="nav nav-tabs fixed-top bg-white" id="myTab" role="tablist">
			<a class="nav-item nav-link active" id="nav-1-tab" data-toggle="tab" href="#nav-target-1" role="tab" aria-controls="nav-target-1" aria-selected="true">Workers</a>
			<a class="nav-item nav-link"        id="nav-5-tab" data-toggle="tab" href="#nav-target-5" role="tab" aria-controls="nav-target-5" aria-selected="false">Pools</a>
			<a class="nav-item nav-link"        id="nav-4-tab" data-toggle="tab" href="#nav-target-4" role="tab" aria-controls="nav-target-4" aria-selected="false">Jobs</a>
			<a class="nav-item nav-link"        id="nav-2-tab" data-toggle="tab" href="#nav-target-2" role="tab" aria-controls="nav-target-2" aria-selected="false">Shares</a>
			<a class="nav-item nav-link"        id="nav-3-tab" data-toggle="tab" href="#nav-target-3" role="tab" aria-controls="nav-target-3" aria-selected="false">Console</a>
			
			<a class="nav-item nav-link"        id="nav-6-tab" data-toggle="tab" href="#nav-target-6" role="tab" aria-controls="nav-target-6" aria-selected="false">Settings</a>
			
			
			<!-- <a class="nav-item nav-link flex-row ml-md-auto d-none d-md-flex global-hash-rate-wrap"  >Hash rate[5s/60s/5m/15m/30m/60m]: <div class="global-hash-rate"></div></a> -->
		</nav>
		
		<div class="fixed-top" style="" >
			<div id="global-workers-summary-hash-rate-cnt" style="width: auto; left: 500px; position: absolute; top: 0px; height: 46px; overflow-y: hidden;">
				<span data-popover-focus-model="out-click" class="badge badge-success" style="margin: 4px; padding: 10px; cursor: pointer;">Summary hash rate 
					<span class="badge badge-light" style="padding: 6px; margin: -4px 0px -4px 0px;" >{{hash_rate}}</span>
				</span>
				
				<span data-popover-focus-model="out-click" class="badge badge-warning" style="margin: 4px; padding: 10px; cursor: pointer;" v-show="dev_time" >Dev fee time</span>
			</div>
		</div>
		
		<div class="fixed-top" style="" >
			<div id="global-hash-rate-cnt" style="width: auto; right: 0px; position: absolute; top: -5px; height: 46px; overflow-y: hidden;">
			
				<table class="display table-sm tb-hash-rate table-light table-dark ">
				</table>
				
			</div>
		</div>
	</header>





	<div class="tab-content stat-main-cnt" id="nav-tabContent">	
		<div class="tab-pane fade show active width: 100%;" id="nav-target-1" role="tabpanel" aria-labelledby="nav-1-tab">
			<table class="display table table-hover table-dark table-style-1" id="worker-list" cellspacing="0"  width="100%" >
				<thead>
					<tr>
						<th>#</th>
						<th>Pool info</th>
						<th>Address</th>
						<th>Agent</th>
						<th>Login</th>
						<th>Password</th>
						<th>Jobs</th>
						<th>A/R shares</th>
						<th>Shares</th>
						<th>Hashes</th>
						<th>Hashrate</th>
						<th>Time in work</th>
						<th>Connection time</th>
						<th>Disconnection time</th>
					</tr>
				</thead>
				<tbody></tbody>
			</table>
		</div>
		
		<div class="tab-pane fade" id="nav-target-2" role="tabpanel" aria-labelledby="nav-2-tab">
	  
			<table class="display table table-hover table-dark table-style-1" id="share-list" cellspacing="0"  width="100%" >
				<thead>
				<tr>
				  <th>#</th>
				  <th>Pool info</th>
				  <th>Worker info</th>
				  <th>Job info</th>
				  <th>Diff</th>
				  <th>Diff real</th>
				  <th>Block height</th>
				  <th>Hash</th>
				  <th>Status</th>
				  <th>Time in work</th>
				  <th>Time start</th>
				  <th>Time end</th>
				</tr>
				</thead>
				<tbody></tbody>  
			</table>

		</div>

		<div class="tab-pane fade" id="nav-target-4" role="tabpanel" aria-labelledby="nav-4-tab">
			<table class="display table table-hover table-dark table-style-1" id="job-list" cellspacing="0"  width="100%" >
				<thead>
					<tr>
					  <th>#</th>
					  <th>Pool info</th>
					  <th>Job id</th>
					  <th>A/R shares</th>
					  <th>Workers</th>
					  <th>Diff</th>
					  <th>Diff real</th>
					  <th>Block height</th>
					  <th>Time in work</th>
					  <th>Time start</th>
					  <th>Time end</th>
					</tr>
				</thead>
				<tbody></tbody>  
			</table>
		</div>
		
		<div class="tab-pane fade" id="nav-target-5" role="tabpanel" aria-labelledby="nav-5-tab">
			<table class="display table table-hover table-dark table-style-1" id="pool-list" cellspacing="0"  width="100%" >
				<thead>
					<tr>
					  <th>#</th>
					  <th>Address</th>
					  <th>Diff</th>
					  <th>Diff real</th>
					  <th>Workers</th>
					  <th>Jobs</th>
					  <th>A/R shares</th>
					  <th>Hashes</th>
					  <th>Hashrate [CR/5m/10m/15m/30m/60m/ALL]</th>
					  <th>Ping(msec)</th>
					  <th>Time in work</th>
					  <th>Connection time</th>
					  <th>Disconnection time</th>
					</tr>
				</thead>
				<tbody></tbody>  
			</table>
		</div>
		
		<div class="tab-pane fade" id="nav-target-3" role="tabpanel" aria-labelledby="nav-3-tab">
			<table class="display table table-hover table-dark table-style-1" id="log-list" cellspacing="0"  width="100%" >
				<thead>
				<tr>
				  <th>#</th>
				  <th>Time</th>
				  <th>Log</th>
				</tr>
				</thead>
				<tbody></tbody>  
			</table>
		</div>

		<div class="tab-pane fade" id="nav-target-6" role="tabpanel" aria-labelledby="nav-6-tab">
			
			<div class="app-settings-cnt">

				<ul class="nav nav-tabs" role="tablist">
					<li class="nav-item"><a class="nav-link active" data-toggle="tab" href="#settings-a" role="tab">Pools</a></li>
					<!--<li class="nav-item"><a class="nav-link " data-toggle="tab" href="#worker-mng" role="tab">Worker Management</a></li>-->
					<!--<li class="nav-item"><a class="nav-link " data-toggle="tab" href="#dev-fee" role="tab">Dev fee</a></li>-->
				</ul>

				<div class="tab-content">
				
					<div class="tab-pane active" id="settings-a" role="tabpanel">
						<div id="settings-pool-group-list" >
						
							<div
								class="settings-pool-group-item"
								v-for="(pool_group, pool_group_index) in pool_group_list"
							>
								<div>
									<div class="btn-toolbar" role="toolbar" aria-label="Toolbar with button groups">
										<div class="btn-group" role="group" >
											<button v-bind:disabled="pool_group_list_lock" class="btn btn-success" style="width: 120px" v-if="pool_group._pool_group_state === 'disconnected'" v-on:click="connectPoolGroup(pool_group)" >Connect</button>
											<button v-bind:disabled="pool_group_list_lock" class="btn btn-danger"  style="width: 120px" v-if="pool_group._pool_group_state === 'connected'"    v-on:click="disconnectPoolGroup(pool_group)" >Disconnect</button>
								
											<button v-bind:disabled="pool_group_list_lock || pool_group_list_update_lock" class="btn btn-secondary" v-on:click="savePoolGroup(pool_group)" >
												<svg class="icon icon-floppy"><use xlink:href="#icon-floppy"></use></svg>
											</button>
											
											<button v-bind:disabled="pool_group_list_lock || pool_group_list_update_lock" class="btn btn-secondary" v-on:click="delPoolGroup(pool_group)" >
												<svg class="icon icon-cross"><use xlink:href="#icon-cross"></use></svg> 
											</button>
											
											<div class="btn btn-secondary" style="padding: 0px" >
												<div class="btn-group-vertical btn-sm" style="padding: 0px;">
													<button style="font-size: 0.6rem;" v-bind:disabled="pool_group_list_lock || pool_group_list_update_lock || !pool_group_index" class="btn btn-sm btn-secondary" v-on:click="movePoolGroup(pool_group,  'up'  )" > <svg class="icon icon-arrow-up"><use xlink:href="#icon-arrow-up"></use></svg> </button>
													<button style="font-size: 0.6rem;" v-bind:disabled="pool_group_list_lock || pool_group_list_update_lock || (pool_group_index + 1 >= pool_group_list.length)" class="btn btn-sm btn-secondary" v-on:click="movePoolGroup(pool_group, 'down')" > <svg class="icon icon-arrow-down"><use xlink:href="#icon-arrow-down"></use></svg> </button>
												</div>
											</div>

											<button v-bind:disabled="pool_group_list_lock" class="btn btn-secondary settings-pool-group-group-name" v-on:click="pool_group._show_pool_list = !pool_group._show_pool_list">{{ pool_group.pool_group_name }}</button>
										</div>
									</div>
								
								</div>
								
								<div style="padding: 20px" v-show="pool_group._show_pool_list">
								
									<div class="input-group input-group-sm col-xs-4 settings-div-input-group-group-name">
										<span class="input-group-addon" >Group name</span>
										<input v-bind:disabled="pool_group_list_lock || pool_group_list_update_lock" type="text" class="form-control settings-input-group-name" placeholder="Group name" aria-describedby="sizing-addon3" v-model.trim="pool_group.pool_group_name" >
									</div>
									<br/>
									<table class="table  table-bordered settings-table-pools">
										<thead>
											<tr>
												<td class="settings-input-pool-address"  >Address</td>
												<td class="settings-input-pool-login"    >Login</td>
												<td class="settings-input-pool-password" >Password</td>
												<td class="settings-input-pool-retry-count-connect" >Retry count connect</td>
												<td class="settings-input-pool-state" >State</td>
												<td class="settings-input-pool-action" >Action</td>
												<td class="settings-input-pool-position" >Position</td>
											</tr>
										</thead>
										<tbody>
										
											<tr
												v-for="(pool, pool_index) in pool_group.pool_list"
												
												
												v-bind:pool_group_pool_id="pool.id"
											>
												<td class="settings-input-pool-address"  ><input v-bind:disabled="pool_group_list_lock || pool_group_list_update_lock" type="text" class="form-control"  placeholder="Pool address" aria-describedby="sizing-addon3" v-model.trim="pool.pool.address"  /></td>
												<td class="settings-input-pool-login"    ><input v-bind:disabled="pool_group_list_lock || pool_group_list_update_lock" type="text" class="form-control"    placeholder="Login"        aria-describedby="sizing-addon3" v-model.trim="pool.pool.login"    /></td>
												<td class="settings-input-pool-password" ><input v-bind:disabled="pool_group_list_lock || pool_group_list_update_lock" type="text" class="form-control" placeholder="Password"     aria-describedby="sizing-addon3" v-model.trim="pool.pool.password" /></td>
												<td class="settings-input-pool-retry-count-connect" >
													<input v-bind:disabled="pool_group_list_lock || pool_group_list_update_lock" class="form-control" placeholder="" type="number" style="width: 100%" min="1" v-model.trim="pool.pool.retry_count_connect" value="5" >
												</td>
												<td class="settings-input-pool-state" >
													<div>
														<span v-show="pool._pool_state === 'connected'"    class="badge badge-success" style="padding: 8px; cursor: pointer;">connected</span>
														<span v-show="pool._pool_state === 'disconnected'" class="badge badge-danger"  style="padding: 8px; cursor: pointer;">disconnected</span>
													</div>
												</td>
												<td class="settings-input-pool-action" >
													<div class="btn-group" >
														<button v-bind:disabled="pool_group_list_lock || pool_group_list_update_lock" class="btn btn-secondary" v-on:click="checkConnectPool(pool_group, pool)">Check connect</button>
														<button v-bind:disabled="pool_group_list_lock || pool_group_list_update_lock" class="btn btn-secondary" v-on:click="savePool(pool_group, pool)" > <svg class="icon icon-floppy"><use xlink:href="#icon-floppy"></use></svg> </button>
														<button v-bind:disabled="pool_group_list_lock || pool_group_list_update_lock" class="btn btn-secondary" v-on:click="delPool (pool_group, pool)" > <svg class="icon icon-cross"><use xlink:href="#icon-cross"></use></svg> </button>
													</div>
												</td>
												<td class="settings-input-pool-position" >
													<div class="btn-group-vertical btn-sm">
														<button v-bind:disabled="pool_group_list_lock || pool_group_list_update_lock || !pool_index" class="btn btn-sm btn-secondary" v-on:click="movePool(pool_group, pool, 'up'  )" > <svg class="icon icon-arrow-up"><use xlink:href="#icon-arrow-up"></use></svg> </button>
														<button v-bind:disabled="pool_group_list_lock || pool_group_list_update_lock || (pool_index + 1 >= pool_group.pool_list.length)" class="btn btn-sm btn-secondary" v-on:click="movePool(pool_group, pool, 'down')" > <svg class="icon icon-arrow-down"><use xlink:href="#icon-arrow-down"></use></svg> </button>
													</div>
												</td>
											</tr>
											
											
											<tr>
												<td colspan="7">
													<button v-bind:disabled="pool_group_list_lock || pool_group_list_update_lock" class="btn btn-secondary" v-on:click="addPool(pool_group)" > <svg class="icon icon-plus"><use xlink:href="#icon-plus"></use></svg> </button>
												</td>
											</tr>
										</tbody>

									</table>
								
								</div>
							</div>
						
							<button v-bind:disabled="pool_group_list_lock || pool_group_list_update_lock" class="btn btn-secondary" v-on:click="addPoolGroup()" > <svg class="icon icon-plus"><use xlink:href="#icon-plus"></use></svg> </button>
					
						</div>
						
						
					</div>
					
				</div>			
			</div>
			
			<style>
			.form-cst {
			}
			#worker-mng table td {
				vertical-align: middle;
			}
			.table-workers-system-info * {
				padding: 0px 5px 0px 5px !important;
			}
			
			
			
			.settings-table-pools {
				//table-layout: fixed;
			}
			.settings-pool-group-item {
				padding-bottom: 10px;
			}
			
			.settings-table-pools td {
				vertical-align: middle;
			}
			.settings-table-pools * {
				font-size: 12px !important;
			}
			
			.settings-div-input-group-group-name {
				width: 300px;
			}
			
			
			.settings-input-pool-address {
			}
			.settings-input-pool-login {
			}
			.settings-input-pool-password {
				width: 150px;
			}
			.settings-input-pool-retry-count-connect {
				width: 1px;
				white-space: nowrap;
			}
			.settings-input-pool-state {
				width: 1px;
				text-align: center;
				//white-space: nowrap;
			}
			.settings-input-pool-action {
				width: 1px;
				text-align: center;
			}
			.settings-input-pool-position {
				width: 1px;
				text-align: center;
			}
			
			
			
			.settings-pool-group-group-name {
				width: 400px;
				text-align: left;
			}
			
			</style>
			
		</div>

	</div>
		
	<style>
	.settings-pool-cnt {
		//border: 1px solid #440;
		padding: 5px;
	}
	.settings-pool-cnt > * {
		margin-top: 5px;
		width: 100%;
	}
	.btn {
		cursor: pointer;
	}
	
	.settings-pool {
		padding: 5px;
	}
	.settings-pool > div {
		padding: 5px;
	}
	.settings-pool-sm-options > div {
		padding: 5px;
	}
	
	#settings-a {
		padding: 10px;
	}
	.app-settings-cnt {
		padding: 20px;
	}
	</style>
	
	
	
	
	
	
	
	
	<div class="modal" tabindex="-1" role="dialog" id="modal-login">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header"><h5 class="modal-title">Login</h5></div>
		  
				<div class="modal-body">
					<div class="auth-badge-invalid" style="display: none; padding: 8px;" >
						<span class="badge badge-danger">Invalid auth key</span>
					</div>
					
					<div class="input-group" >
						<span class="input-group-addon" >Auth key</span>
						<input type="text" class="form-control auth-input-auth-key" placeholder="secret key" >
					</div>
				</div>
		  
				<div class="modal-footer">
					<button type="button" class="btn btn-primary auth-btn-save" >Save</button>
				</div>
			</div>
		</div>
	</div>	
	<div class="modal" tabindex="-1" role="dialog" id="modal-restart">
	  <div class="modal-dialog" role="document">
		<div class="modal-content">
		  <div class="modal-header">
			<h5 class="modal-title">Restart...</h5>
			<button type="button" class="close" data-dismiss="modal" aria-label="Close">
			  <span aria-hidden="true">&times;</span>
			</button>
		  </div>
		  <div class="modal-body">
			<p>The proxy server is rebooted. Restart.</p>
		  </div>
		  <div class="modal-footer">
			<button type="button" class="btn btn-primary btn-restart" onclick="window.location.reload()" >Restart</button>
			<button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
		  </div>
		</div>
	  </div>
	</div>	
	
	
	
	<style>
	body {
		margin-top: 56px;
	}

	.tb-hash-rate {
		font-size: 12px;
	}

	#console-line-list {
		font-size: 12px;
	}
	#console-line-list tbody * {
		padding: 5px;
	}

	.dataTables_scrollHead * {
		font-size: 12px;
	}


	#done-hash-list, #worker-list, #job-list, #pool-list {
		font-size: 12px;
	}

	.popover * {
		font-size: 12px;
	}

	.global-hash-rate-wrap {
		font-size: 12px;
	}
	.global-hash-rate .hash_rate_table {
		width: 300px;
	}
	.global-hash-rate span {
		margin-left: 5px;
		font-size: 12px;
	}
	.hash_rate_table {
		margin: 0px;
		padding: 0px;
		width: 250px;
	}
	.hash_rate_table span {
		display: block;
		float: left;	
		width: 40px;
	}

	#show-gb-hash-rate {
		right: 0px;
	}
	#show-gb-hash-rate * {
		font-size: 12px;
	}

	.table-style-1 thead *, .table-style-1 tbody * {
		font-size: 10px !important;
	}
	
	
	.hrtb {
		display: table;
		background: #FFF;
		width: 100%;
		padding-left: 5px;
		padding-right: 5px;
	}
	.hrtb > div {
		display: table-row;
	}
	.hrtb > div > div {
		display: table-cell;
		font-size: 8px;
		//margin: 5px;
		padding-left: 2px;
		padding-right: 2px;
		//border: 1px dotted white;	
		color: #000;
	}
	</style>

	<script>

	requirejs.config({
		baseUrl: "/",
		paths: {
			//jquery: "/lib/jquery/jquery-3.2.1.min",
			socketio: "/lib/socket.io/socket.io"
		}
	});

	require(["app/Main"], function(Main) {
		$(function() {
			var main = new Main();
		});
	});

	</script>

 

</body>